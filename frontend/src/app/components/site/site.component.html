<div class="container">
    <h2>{{titleSite}}</h2>
    <div class="row">
        <div class="col-2">

        </div>
        <form [formGroup] = "formGroup" (submit)="recordSite($event)" class="col-8">
            <div class="text-center">

                <input type="number" formControlName="id_site" required class="invisible" >
                <mat-form-field appearance="fill">
                    <mat-label>{{nameLabel}}</mat-label>
                    <input matInput placeholder="Entrez un nom" formControlName="nom" required >
                    <mat-error *ngIf="formGroup.get('nom')?.hasError('required')">Le nom est requis.</mat-error>
                </mat-form-field>
                <mat-form-field appearance="fill">
                    <mat-label>{{housingLabel}}</mat-label>
                    <mat-select multiple required formControlName="habitats" [compareWith]="compareNomenclatures">
                        <mat-option *ngFor="let hab of uniqueHabitats" [value]="hab">{{ hab.libelle }}</mat-option>
                    </mat-select>
                    <mat-error *ngIf="formGroup.get('habitats')?.hasError('required')">Au moins un habitat est requis.</mat-error>
                </mat-form-field>
                <mat-form-field appearance="fill">
                    <mat-label>{{statusLabel}}</mat-label>
                    <mat-select required formControlName="type" [compareWith]="compareNomenclatures">
                        <mat-option *ngFor="let type of uniqueStatuts" required [value]="type">{{ type.libelle }}</mat-option>
                    </mat-select>
                    <mat-error *ngIf="formGroup.get('type')?.hasError('required')">Un statut est requis.</mat-error>
                </mat-form-field>
                <mat-form-field appearance="fill">
                    <mat-label>{{latitudeLabel}}</mat-label>
                    <input matInput placeholder="Entrez une latitude" required formControlName="position_y">
                    <mat-error *ngIf="formGroup.get('position_y')?.hasError('required')">Une latitude est requise.</mat-error>
                    <mat-error *ngIf="formGroup.get('position_y')?.hasError('pattern')">Le format est incorrect.</mat-error>
                </mat-form-field>
                <mat-form-field appearance="fill">
                    <mat-label>{{longitudeLabel}}</mat-label>
                    <input matInput placeholder="Entrez une longitude" required formControlName="position_x">
                    <mat-error *ngIf="formGroup.get('position_x')?.hasError('pattern')">Une longitude est requise.</mat-error>
                    <mat-error *ngIf="formGroup.get('position_x')?.hasError('pattern')">Le format est incorrect.</mat-error>
                </mat-form-field>
            </div>
            <div class="row" id="boutons">
                <div class="col-6">
                    <button mat-raised-button color="accent" >{{btnPreviousStepLabel}}</button>
                </div>
                <div class="col-6 text-end">
                    <button mat-raised-button id="btnNewSite"  type="submit"  color="warn">{{btnRecordLabel}}</button>
                </div>
            </div>
            <app-map
                [sites]="sites"
                [formGroup]="formGroup"
                [changePosition]="changePosition"
            ></app-map>
            
        </form>
        <div class="col-2">

        </div>
    </div>
</div>
